{% extends "core/_layout.html.twig" %}

{% block content %}

<div class="row" style="margin-top: 30px;">

    {# Sidebar #}
    <div class="col-md-3">

        {# Search and filter box #}
        <div class="content-box bg-keeper bd-keeper">
            <div class="content-header">
                <h2>Workshop</h2>
            </div>
            <div class="content-body">
                <nav class="nav flex-column">
                    <a class="nav-link {% if path_equals('/workshop/browse/*') %}active{% endif %}" href="/workshop/browse/latest">
                        <ion-icon name="list-outline"></ion-icon>
                        Browse
                    </a>
                    <a class="nav-link" href="/workshop/random/map">
                        <ion-icon name="dice-outline"></ion-icon>
                        Random Map
                    </a>
                    <a class="nav-link" href="/workshop/random/campaign">
                        <ion-icon name="dice-outline"></ion-icon>
                        Random Campaign
                    </a>
                    {% if account != null %}
                        <a class="nav-link {% if path_equals('/workshop/browse/user/' ~ account.id) %}active{% endif %}" href="/workshop/browse/user/{{ account.id }}">
                            <ion-icon name="person-outline"></ion-icon>
                            My workshop items
                        </a>
                        <a class="nav-link {% if path_equals('/workshop/upload') %}active{% endif %}" href="/workshop/upload">
                            <ion-icon name="cloud-upload-outline"></ion-icon>
                            Upload
                        </a>
                    {% endif %}
                </nav>
                {% if account == null %}
                    <p style="margin: 15px 0px 0px 0px; padding: 0px;" class="text-muted">
                        <a href="/login?redirect=/workshop">Login</a> or <a href="/register">register</a> to submit your own workshop items.
                    </p>
                {% endif %}
            </div>
        </div>
        <div class="content-box bg-keeper bd-keeper">
            <div class="content-header">
                <h2>Search</h2>
            </div>
            <div class="content-body">

                <form action="/workshop/search" method="GET">

                    <div class="form-group">
                        <label for="keywords">Keywords</label>
                        <input type="text" class="form-control" id="keywords" name="keywords">
                    </div>

                    <div class="form-group">
                        <label for="type">Type</label>
                        <select class="form-control form-select" id="type" name="type">
                            <option value="any">Any</option>
                            {% if types|length > 0 %}
                                {% for type in types %}
                                    <option value="{{ type.value }}">{{ type.name|enum_beautify }}</option>
                                {% endfor %}
                            {% endif %}
                        </select>
                    </div>

                    {# <div class="form-group">
                        <label>
                            Type
                        </label>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="type" value="0" id="type-any">
                            <label class="form-check-label" for="type-any">
                                Any
                            </label>
                        </div>
                        {% if types|length > 0 %}
                            {% for type in types %}
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="type" value="{{ type.value }}" id="type{{ loop.index }}">
                                    <label class="form-check-label" for="type{{ loop.index }}">
                                        {{ type.name|enum_beautify }}
                                    </label>
                                </div>
                            {% endfor %}
                        {% endif %}
                    </div> #}

                    <div class="form-group">
                        <label>
                            Tags
                        </label>
                        {% if tags|length > 0 %}
                            {% for tag in tags %}
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="tag[]" value="{{ tag.name }}" id="tag{{ loop.index }}">
                                <label class="form-check-label" for="tag{{ loop.index }}">
                                    {{ tag.name }}
                                </label>
                            </div>
                            {% endfor %}
                        {% endif %}
                    </div>

                    <div class="form-group">
                        <input type="submit" class="form-control btn btn-lg btn-medieval" value="Search" />
                    </div>

                </form>
            </div>
        </div>

        <div class="content-box bg-keeper bd-keeper">
            <div class="content-body">
                <a href="" class="margin-top: 50px;">
                    <img src="/img/unearth.png" class="mx-auto d-block" />
                </a>
                <div style="width: 100%" class="d-flex justify-content-center">
                    <a href="/" class="title-link" style="margin-top: 20px; margin-bottom: 10px;">
                        Unearth
                    </a>
                </div>
                <p class="text-center" style="margin-top: 0;">
                    Create your own maps and campaigns for KeeperFX and DK1 with <strong>Unearth.</strong>
                </p>
                <p class="text-center">
                    You can find it <a href="">here</a>.
                </p>
            </div>
        </div>

    </div>

    {# Workshop content #}
    <div class="col-md-9">

        {{ render_flash_messages() }}

        {% block workshop_content %}{% endblock %}
    </div>

</div>

{% endblock %}
